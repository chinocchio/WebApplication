@model WebApplication2.ViewModels.SalesTransactionCreateViewModel

@{
    ViewData["Title"] = "Create Sales Transaction";
}

<h2>Create Sales Transaction</h2>

<form asp-action="Create" method="post">
        @Html.AntiForgeryToken()

    <h4>Sales Transaction Info</h4>
    <div>
        <label asp-for="ContractNumber"></label>
        <input asp-for="ContractNumber" class="form-control" />
    </div>

    <div>
        <label asp-for="TypeOfSale"></label>
        <input asp-for="TypeOfSale" class="form-control" />
    </div>

    <div>
        <label asp-for="HoldingDate"></label>
        <input asp-for="HoldingDate" class="form-control" type="date" />
    </div>

    <div>
        <label asp-for="TransactionType"></label>
        <input asp-for="TransactionType" class="form-control" />
    </div>

    <div>
        <label asp-for="PromoDiscount"></label>
        <input asp-for="PromoDiscount" class="form-control" />
    </div>

    <div>
        <label asp-for="StatusInGeneral"></label>
        <input asp-for="StatusInGeneral" class="form-control" />
    </div>

    <div>
        <label asp-for="Milestone"></label>
        <input asp-for="Milestone" class="form-control" />
    </div>

    <div>
        <label asp-for="NewColorStatus"></label>
        <input asp-for="NewColorStatus" class="form-control" />
    </div>

    <h4>Select Existing Business Partner</h4>
    <div>
        <label asp-for="SelectedBusinessPartnerId"></label>
        <select id="bpDropdown" asp-for="SelectedBusinessPartnerId" asp-items="Model.ExistingBusinessPartners" class="form-control">
            <option value="">-- Create New Business Partner --</option>
        </select>
    </div>
    <div id="newBpFields">
        <div>
            <label asp-for="Fullname"></label>
            <input asp-for="Fullname" class="form-control" />
        </div>
        <div>
            <label asp-for="Role"></label>
            <input asp-for="Role" class="form-control" />
        </div>
        <div>
            <label asp-for="CustomerCode"></label>
            <input asp-for="CustomerCode" class="form-control" />
        </div>
        <div>
            <label asp-for="ClientBase"></label>
            <input asp-for="ClientBase" class="form-control" />
        </div>
        <div>
            <label asp-for="IdSubmitted"></label>
            <input asp-for="IdSubmitted" class="form-control" />
        </div>
        <div>
            <label asp-for="IdDateSubmitted"></label>
            <input asp-for="IdDateSubmitted" class="form-control" type="date" />
        </div>
        <div>
            <label asp-for="EmailAddress"></label>
            <input asp-for="EmailAddress" class="form-control" />
        </div>
        <div>
            <label asp-for="ContactNumber"></label>
            <input asp-for="ContactNumber" class="form-control" />
        </div>
    </div>
    <div>
        <label asp-for="SelectedPropertyId">Select Property</label>
        <select asp-for="SelectedPropertyId" asp-items="Model.Properties" class="form-control">
            <option value="">-- Select a Property --</option>
        </select>
    </div>
    <button type="submit" class="btn btn-primary">Save</button>
</form>

@section Scripts {
    <script>
        const dropdown = document.getElementById("bpDropdown");
        const newFields = document.getElementById("newBpFields");

        function toggleNewFields() {
            if (dropdown.value) {
                newFields.style.display = "none";
            } else {
                newFields.style.display = "block";
            }
        }

        // Run on load and on change
        toggleNewFields();
        dropdown.addEventListener("change", toggleNewFields);
    </script>

    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}
